<!DOCTYPE html>
<html>
{% load static %}
<head>
  <title>MoneyParce Overview</title>
  <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Irish+Grover&family=Passion+One:wght@400;700;900&display=swap"
      rel="stylesheet" />
  <link rel="stylesheet" 
        type="text/css" 
        href="{% static 'css/style.css' %}" />
</head>

<body>
  <div class="sideBar">
    <div class="sideBarHeader">
      <img src="{% static 'img/logo.png' %}" style="height: 70px" />
      <div id="LogoName">MoneyParce</div>
      <div class="sideBarText">Welcome, user</div>
    </div>
    <div class="navigator">
      <div class="navDiv">
        <img src="{% static 'img/overview.png' %}" style="height: 20px; margin-right: 20px;" />
        <div class="sideBarText">Overview</div>
      </div>
      
      <div class="navDiv">
        <img src="{% static 'img/tran.png' %}" style="height: 20px; margin-right: 20px;" />
        <div class="sideBarText">Transactions</div>
      </div>
      
      <div class="navDiv">
        <img src="{% static 'img/report.png' %}" style="height: 20px; margin-right: 20px;" />
        <div class="sideBarText">Reports</div>
      </div>

      <div class="navDiv">
        <img src="{% static 'img/settings.png' %}" style="height: 20px; margin-right: 20px;" />
        <div class="sideBarText">Settings</div>
      </div>
      
      
    </div>
  </div>

  <div class="mainWrapper">

    <div class="header">
      <div class="pageTitle">Overview</div>
    </div>
      
    <div class="innerWrapper">



    <div class="totalContainer">
      <div class="totalRed">
        <div class="totalTitle">Current Balance</div>
        <div class="totalText">${{ remaining_balance }}</div>
      </div>
      <div class="totalBeige">
        <div class="totalTitle">Total Income</div>
        <div class="totalText">${{ total_income }}</div>
      </div>
      <div class="totalRed">
        <div class="totalTitle">Total Expense</div>
        <div class="totalText">${{ total_expenses }}</div>
      </div>
      <div class="totalBeige">
        <div class="totalTitle">Expense over Income</div>
        <div class="totalText">0.00%</div>
      </div>
    </div>

    <div class="whiteBox">
      <div class="whiteBoxTitle">Budgets</div>
      <ul class="budgetList">
        {% for budget in budgets %}
        <div class="budgetListDiv">
          <div><strong>{{ budget.name }}</strong></div> 
          <div>{{ budget.expenses_total|floatformat:2 }} / {{ budget.total_budget }}</div>
        </div>
        {% empty %}
          <div class="totalText">No budgets created yet.</div>
        {% endfor %}
      </ul>
      <div id="new-budget-form">
        <form method="POST">
          {% csrf_token %}
          <input class="newbudgetInput" type="text" name="budget_name" placeholder="Budget Name (Category)">
          <input class="newbudgetInput" type="text" name="total_budget_new" placeholder="Budget Amount">
          <button type="submit" name="submit_budget">Save Budget</button>
        </form>
      </div>
      <button type="button" class="add-budget-btn" onclick="toggleBudgetForm()">Add Budget</button>
    </div>

        
        
        

        <form method="POST">
          {% csrf_token %}
          <fieldset>
            <legend>Income</legend>
            <input type="text" name="income_amount" placeholder="Income Amount">
            <button type="submit" name="submit_income">+ Add Income</button>
          </fieldset>
          <fieldset>
            <legend>Expense</legend>
            <input type="text" name="expense_amount" placeholder="Expense Amount">
            <select name="expense_budget">
              <option value="">Select Category</option>
              {% for budget in budgets %}
                <option value="{{ budget.id }}">{{ budget.name }}</option>
              {% endfor %}
            </select>
            <button type="submit" name="submit_expense">+ Add Expense</button>
          </fieldset>
        </form>
      </div>
    </div>

  <script>
    function toggleBudgetForm() {
      var form = document.getElementById('new-budget-form');
      if (form.style.display === 'none' || form.style.display === '') {
        form.style.display = 'block';
      } else {
        form.style.display = 'none';
      }
    }
  </script>
</body>
</html>